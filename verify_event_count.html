<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Count Verification</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 { color: #333; margin-top: 0; }
        h2 { color: #666; font-size: 1.2rem; margin-top: 1.5rem; }
        .stat { 
            font-size: 3rem; 
            font-weight: bold; 
            color: #667eea; 
            margin: 10px 0;
        }
        .detail { 
            color: #666; 
            margin: 8px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .detail strong { color: #333; }
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.9rem;
        }
        .loading { color: #999; }
    </style>
</head>
<body>
    <div class="card">
        <h1>ðŸ“Š Event Count Verification</h1>
        <p class="loading" id="loading">Loading events.json...</p>
        
        <div id="results" style="display: none;">
            <div>
                <h2>Total Events in events.json</h2>
                <div class="stat" id="total">-</div>
            </div>
            
            <div>
                <h2>Events in Next 7 Days</h2>
                <div class="stat" id="next7days">-</div>
                <div class="detail">
                    <strong>Date Range:</strong> <span id="dateRange">-</span>
                </div>
            </div>
            
            <div>
                <h2>Events by Day (Next 7 Days)</h2>
                <div id="byDay"></div>
            </div>
            
            <div>
                <h2>File Information</h2>
                <div class="detail"><strong>File:</strong> events.json</div>
                <div class="detail"><strong>Date Range:</strong> <span id="fullRange">-</span></div>
                <div class="detail"><strong>Loaded At:</strong> <span id="loadTime">-</span></div>
            </div>

            <div>
                <h2>Verify in Browser Console</h2>
                <pre>// Open browser console (F12) and paste this:

fetch('./events.json')
  .then(r => r.json())
  .then(data => {
    const events = data.events;
    const today = new Date('2025-10-21');
    const next7 = new Date(today);
    next7.setDate(next7.getDate() + 7);
    
    const upcoming = events.filter(e => {
      const date = new Date(e.date);
      return date >= today && date < next7;
    });
    
    console.log('Total events:', events.length);
    console.log('Next 7 days:', upcoming.length);
  });</pre>
            </div>
        </div>
    </div>

    <script>
        async function loadAndAnalyze() {
            try {
                const response = await fetch('./events.json');
                const data = await response.json();
                const events = data.events;
                
                // Today's date
                const today = new Date('2025-10-21');
                const next7Days = new Date(today);
                next7Days.setDate(next7Days.getDate() + 7);
                
                // Filter events in next 7 days
                const upcomingEvents = events.filter(e => {
                    const eventDate = new Date(e.date);
                    return eventDate >= today && eventDate < next7Days;
                });
                
                // Group by date
                const byDate = {};
                upcomingEvents.forEach(e => {
                    if (!byDate[e.date]) byDate[e.date] = 0;
                    byDate[e.date]++;
                });
                
                // Get date range of all events
                const allDates = events.map(e => e.date).sort();
                
                // Update UI
                document.getElementById('loading').style.display = 'none';
                document.getElementById('results').style.display = 'block';
                document.getElementById('total').textContent = events.length.toLocaleString();
                document.getElementById('next7days').textContent = upcomingEvents.length.toLocaleString();
                document.getElementById('dateRange').textContent = 
                    `${today.toLocaleDateString()} - ${new Date(next7Days.getTime() - 86400000).toLocaleDateString()}`;
                document.getElementById('fullRange').textContent = 
                    `${allDates[0]} to ${allDates[allDates.length - 1]}`;
                document.getElementById('loadTime').textContent = new Date().toLocaleString();
                
                // Show by day
                const byDayHtml = Object.keys(byDate).sort().map(date => 
                    `<div class="detail"><strong>${date}:</strong> ${byDate[date]} events</div>`
                ).join('');
                document.getElementById('byDay').innerHTML = byDayHtml;
                
            } catch (error) {
                document.getElementById('loading').textContent = 'Error loading events.json: ' + error.message;
                document.getElementById('loading').style.color = 'red';
            }
        }
        
        loadAndAnalyze();
    </script>
</body>
</html>
